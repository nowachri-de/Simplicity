<!DOCTYPE html>
<html lang="en" >

	<head>
	  <meta charset="UTF-8">
	  <title>MatMul GPU</title>
	  <script src="js/glfunctions.js"></script>
	  <script src="js/shader.js"></script>
	  <script src="js/program.js"></script>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.4.2/math.min.js"></script>
	  
	</head>

	<body>
		<canvas id="canvas"></canvas>
		
		<script>
		    //Create two matrices 
			var matrixA = new Matrix("canvas",16,16);
			var matrixB = new Matrix("canvas",16,16);
			var program = new Program("canvas",16,16);
			var matrixGL = new MatrixGL("canvas",matrixA, matrixB);
			
			var textureA = program.createTexture('textureA',16, 16, matrixA.getTexels('R'));
			var textureB = program.createTexture('textureB',16, 16, matrixB.getTexels('R'));
			
			//var textureA = matrixGL.createTexture(0,16, 16,matrixA.getTexels('R'));
			//var textureB = matrixGL.createTexture(1,16, 16,matrixB.getTexels('R'));
			
			var shader =  new Shader(matrixGL.gl,matrixA,matrixB);

			var programA = program.buildProgram(shader.getVertexShader(shader.getVertexShaderCode()),shader.getFragmentShader(shader.getFragmentShaderCode()));
			var programB = program.buildProgram(shader.getVertexShader(shader.getVertexShaderCode()),shader.getFragmentShader(shader.getReadableShaderCode()));
			program.compute(textureA,textureB);
		</script>
		
	</body>
</html>
